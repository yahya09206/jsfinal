<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Async Javascript</title>
</head>
<body>

<script>
	// const second = () => {
	// 	setTimeout(() => {
	// 		console.log('Hey there');
	// 	}, 2000);
	// }

	// const first = () => {
	// 	console.log('Hey there');
	// 	second();
	// 	console.log('The end');
	// }
	// first();

	// function getRecipe() {
	// 	setTimeout(() => {
	// 		//Array of recipe id's
	// 		const recipeID = [523, 883, 432, 974];
	// 		console.log(recipeID);

	// 		setTimeout(id => {
	// 			const recipe = {title: 'Fresh tomato pasta', publisher: 'Johnny'};
	// 			console.log(`${id}: ${recipe.title}`);

	// 			setTimeout(publisher => {
	// 				const recipe = {title: 'Italian pizza', publisher: 'Johnny'};
	// 				console.log(recipe);
	// 			},1500, recipe.publisher);
	// 		}, 1500, recipeID[2]);
	// 	}, 1500);
	// }
	// getRecipe();
	//Promises
	// onst getIDs = new Promise((resolve, reject) => {
	// 	setTimeout(() => {
	// 		resolve([523, 883, 432, 974]);
	// 	}, 1500);
	// });

	// // Function to recieve id and return a promise
	// const getRecipe = recID => {
	// 	return new Promise((resolve, reject) => {
	// 		setTimeout(ID => {
	// 			const recipe = {title: 'Fresh tomato pasta', publisher: 'Johnny'};
	// 	 		resolve(`${ID}: ${recipe.title}`);
	// 		}, 1500, recID);
	// 	});
	// };

	// // Get recipe thats related to publisher
	// const getRelated = publisher => {	
	// 	return new Promise((resolve, reject) => {
	// 		setTimeout(pub => {
	// 			const recipe = {title: 'Italian pizza', publisher: 'Johnny'};
	// 			resolve(`${pub}: ${recipe.title}`);
	// 		}, 1500, publisher);
	// 	});
	// };c

	// getIDs
	// .then(IDs => {
	// 	console.log(IDs);
	// 	return getRecipe(IDs[2])
	// })
	// .then(recipe => {
	// 	console.log(recipe);
	// 	return getRelated(`Johnny`);
	// })
	// .then(recipe => {
	// 	console.log(recipe);
	// })
	// .catch(error => {
	// 	console.log(error);
	// });

	//Asycn Await
	// async function getRecipesAW(){
	// 	const IDs = await getIDs;
	// 	console.log(IDs);
	// 	const recipe = await getRecipe(IDs[2]);
	// 	console.log(recipe);
	// 	const related = await getRelated(`Johnny`);
	// 	console.log(related);
	// }
	// getRecipesAW();

	// Ajax call with promises
	function getWeather(woeid){

		fetch(`http://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
		// get data and return promise/error
		.then(result => {
			// console.log(result);
			return result.json();
		})
		.then(data => {
			//console.log(data);
			const today = data.consolidated_weather[0];
			console.log(`temp in ${data.title} stays between ${today.min_temp} and ${today.max_temp}.`)
		})
		.catch(error => console.log(error));
	}
	getWeather(2487956);
	getWeather(44418);

	// Ajax with Async/Await
	async function getWeatherAW(woeid) {
		const result = await fetch(`http://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`);
		const data = await result.json();
		console.log(data);
	}
	getWeatherAW(2487956);
	getWeatherAW(44418);

</script>
</body>
</html>

<!-- Sychronous js is executed line by line -->
<!-- http://cors-anywhere.herokuapp.com -->