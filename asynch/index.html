<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Async Javascript</title>
</head>
<body>

<script>
	// const second = () => {
	// 	setTimeout(() => {
	// 		console.log('Hey there');
	// 	}, 2000);
	// }

	// const first = () => {
	// 	console.log('Hey there');
	// 	second();
	// 	console.log('The end');
	// }
	// first();

	// function getRecipe() {
	// 	setTimeout(() => {
	// 		//Array of recipe id's
	// 		const recipeID = [523, 883, 432, 974];
	// 		console.log(recipeID);

	// 		setTimeout(id => {
	// 			const recipe = {title: 'Fresh tomato pasta', publisher: 'Johnny'};
	// 			console.log(`${id}: ${recipe.title}`);

	// 			setTimeout(publisher => {
	// 				const recipe = {title: 'Italian pizza', publisher: 'Johnny'};
	// 				console.log(recipe);
	// 			},1500, recipe.publisher);
	// 		}, 1500, recipeID[2]);
	// 	}, 1500);
	// }
	// getRecipe();
	//Promises
	const getIDs = new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve([523, 883, 432, 974]);
		}, 1500);
	});

	// Function to recieve id and return a promise
	const getRecipe = recID => {
		return new Promise((resolve, reject) => {
			setTimeout(ID => {
				const recipe = {title: 'Fresh tomato pasta', publisher: 'Johnny'};
		 		resolve(`${ID}: ${recipe.title}`);
			}, 1500, recID);
		});
	};


	getIDs
	.then(IDs => {
		console.log(IDs);
		return getRecipe(IDs[2])
	})
	.then(recipe => {
		console.log(recipe);
	})
	.catch(error => {
		console.log(error);
	});
</script>
</body>
</html>

<!-- Sychronous js is executed line by line -->